# GCC使用手册

## 如何使用gcc编译模块化编写的程序？



| 选项 | 作用                 | 指令                    |
| ---- | -------------------- | ----------------------- |
| -E   | 预处理，生成.i文件   | gcc -E text.c -o text.i |
| -S   | 编译，生成.s文件     | gcc -S text.i -o text.s |
| -c   | 汇编生成.o文件       | gcc -c text.s -o text.o |
|      | 链接，生成可执行文件 | gcc text.o -o text      |

在对C语言文件进行编译的时候，不用显式的去处理.h文件，.h文件会在预处理过程中被合并到.c文件中；因此我们只需要保证gcc能找到.h文件即可（涉及到#include的一些用法，这里不解释，详细的信息请查询关于#include<>和#include""的区别）



## 出现了未定义符号怎么办？

一般出现未定义符号是因为gcc找不到动态库/静态库；请注意头文件和动态库是两个东西，很有可能出现gcc找到了头文件，但是没找到链接库；出现这种情况的时候需要我们自己去手动指定链接库：

举个例子，下面这些命令是我在测试X11的时候所遇到的问题，直接编译的时候出现了很多未定义符号，但是我能够确定我的本地环境里是有X11的动态库的；



### gcc -i(小写i)

表示寻找动态链接库文件

```shell
gcc -o test test.c -i X11
# 表示要寻找一个叫做 libX11.so的动态链接库
# 如果加上-static那么表示寻找libX11.a（.a是静态链接库，.so表示动态链接库）
```



### gcc -I(大写i)

```shell
# -I后面需要跟一个路径，表示头文件要优先在这个路径下面查找
gcc -o test test.c -I/home/lee/include
# 这个命令表示要将/home/lee/include 作为第一个寻找头文件的目录
# 寻找的顺序变成了 /home/lee/include -> /usr/include -> /usr/local/include 
```



### gcc -L(大写l)

```shell
# 表示在指定的目录下寻找链接库
gcc -o test test.c -L/home/lee/lib
# 注意 -I -L的区别：-I指定的是找头文件的目录；-L指定的是找链接库的目录；
```

